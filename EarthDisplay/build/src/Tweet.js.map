{"version":3,"sources":["../../src/Tweet.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,MAAM,gBAAgB,SAAS,cAAT,CAAwB,eAAxB,CAAtB;;MAEqB,K;;;AAEnB,mBAAY,IAAZ,EAAkB;AAAA;;AAAA;;AAGhB,UAAI,WAAW,SAAS,aAAT,CAAuB,KAAvB,CAAf;AACA,eAAS,SAAT,GAAqB,oBAArB;AACA,eAAS,WAAT,GAAuB,KAAK,OAA5B;AACA,eAAS,KAAT,CAAe,GAAf,GAAqB,KAArB;AACA,eAAS,KAAT,CAAe,IAAf,GAAsB,KAAtB;AACA,YAAK,QAAL,GAAgB,QAAhB;;AAEA,oBAAc,WAAd,CAA0B,QAA1B;;;;;;;AAQA,UAAI,SAAS,sBAAb;AACA,YAAK,GAAL,CAAS,MAAT;AACA,aAAO,QAAP,CAAgB,CAAhB,GAAoB,CAAC,KAAK,EAAN,GAAS,CAA7B;AACA,aAAO,QAAP,CAAgB,CAAhB,GAAoB,CAAC,CAArB;;AAGA,UAAI,iBAAiB,YAAM;AACzB,cAAK,MAAL;AACD,OAFD;;AAIA,aAAO,MAAP,CAAc,gBAAd,CAA+B,QAA/B,EAAyC,cAAzC;;AAEA,YAAK,gBAAL,CAAsB,SAAtB,EAAiC,YAAM;AACrC,cAAK,OAAL;AACA,eAAO,MAAP,CAAc,mBAAd,CAAkC,QAAlC,EAA4C,cAA5C;AACD,OAHD;;AA9BgB;AAmCjB;;;;gCAES;AACR,aAAK,QAAL,CAAc,UAAd,CAAyB,WAAzB,CAAqC,KAAK,QAA1C;AACD;;;+BAEQ;;AAEP;;AAEA,YAAI,QAAQ,KAAK,YAAL,CAAkB,IAAI,MAAM,OAAV,CAAkB,CAAlB,EAAoB,CAApB,EAAsB,CAAtB,CAAlB,CAAZ;;;;AAIA,YAAI,MAAM,WAAW,KAAX,CAAV;;AAEA,aAAK,QAAL,CAAc,KAAd,CAAoB,IAApB,GAA2B,KAAK,KAAL,CAAW,CAAC,IAAI,CAAJ,GAAM,CAAP,IAAU,CAAV,GAAY,OAAO,UAA9B,IAA4C,IAAvE;AACA,aAAK,QAAL,CAAc,KAAd,CAAoB,GAApB,GAA2B,OAAO,WAAP,GAAmB,KAAK,KAAL,CAAW,CAAC,IAAI,CAAJ,GAAM,CAAP,IAAU,CAAV,GAAY,OAAO,WAA9B,CAApB,GAAkE,IAA5F;;;AAGA,YAAI,UAAU,CAAC,KAAG,OAAO,QAAP,CAAgB,UAAhB,CAA2B,KAA3B,CAAJ,IAAuC,EAArD;AACA,YAAI,UAAU,CAAd,EAAiB;AACf,oBAAU,CAAV;AACD;;AAED,YAAI,UAAU,CAAd,EAAiB;AACf,oBAAU,CAAV;AACD;;AAED,aAAK,QAAL,CAAc,KAAd,CAAoB,OAApB,GAA8B,OAA9B;;AAEA,aAAK,MAAL,CAAY,IAAI,MAAM,OAAV,CAAkB,CAAlB,EAAoB,CAApB,EAAsB,CAAtB,CAAZ;AAED;;;;IAtEgC,MAAM,Q;;oBAApB,K;AAwEpB","file":"Tweet.js","sourcesContent":["\nimport Beacon from './Beacon.js';\n\nconst canvasWrapper = document.getElementById(\"canvasWrapper\");\n\nexport default class Tweet extends THREE.Object3D {\n\n  constructor(data) {\n    super();\n\n    var tweetEle = document.createElement(\"div\");\n    tweetEle.className = \"popupDisplay tweet\";\n    tweetEle.textContent = data.message;\n    tweetEle.style.top = \"0px\";\n    tweetEle.style.left = \"0px\";\n    this.tweetEle = tweetEle;\n\n    canvasWrapper.appendChild(tweetEle);\n\n\n    // var geometry = new THREE.SphereGeometry(0.5, 5, 5);\n    // var material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );\n    // var cube = new THREE.Mesh( geometry, material );\n    // this.add( cube );\n\n    var beacon = new Beacon();\n    this.add(beacon);\n    beacon.rotation.x = -Math.PI/2;\n    beacon.position.z = -3;\n\n\n    var updateListener = () => {\n      this.update();\n    };\n\n    global.events.addEventListener('update', updateListener);\n\n    this.addEventListener('removed', () => {\n      this.destroy();\n      global.events.removeEventListener('update', updateListener);\n    })\n\n  }\n\n  destroy() {\n    this.tweetEle.parentNode.removeChild(this.tweetEle);\n  }\n\n  update() {\n\n    super.updateMatrixWorld()\n\n    var pos3D = this.localToWorld(new THREE.Vector3(0,0,0));\n\n    // pos3D.z += 2;\n\n    var pos = calc3Dto2D(pos3D);\n    // console.log(pos);\n    this.tweetEle.style.left = Math.floor((pos.x+1)/2*window.innerWidth) + 'px';\n    this.tweetEle.style.top = (window.innerHeight-Math.floor((pos.y+1)/2*window.innerHeight)) + 'px';\n    // this.tweetEle.style.opacity\n\n    var opacity = (15-camera.position.distanceTo(pos3D))/15;\n    if (opacity < 0) {\n      opacity = 0;\n    }\n\n    if (opacity > 1) {\n      opacity = 1;\n    }\n\n    this.tweetEle.style.opacity = opacity;\n\n    this.lookAt(new THREE.Vector3(0,0,0));\n\n  }\n\n};\n"]}