{"version":3,"sources":["../../src/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["\nimport * as Loaders from './src/Loaders.js';\nimport EarthObject from './src/EarthObject.js';\n\nglobal.events = new THREE.EventDispatcher();\n\nPromise.all([\n  Loaders.CacheTexture('images/2_no_clouds_4k.jpg'),\n  Loaders.CacheTexture('images/elev_bump_4k.jpg'),\n  Loaders.CacheTexture('images/water_4k.png'),\n  Loaders.CacheTexture('images/skybox.jpg'),\n  Loaders.CacheTexture('images/hemisphere.png'),\n  Loaders.CacheTexture('images/beacon.png'),\n\n  Loaders.CacheJSON('dataForHenry.json')\n]).then(function() {\n\n  var canvas = document.getElementById(\"earth\");\n\n  var width  = window.innerWidth,\n      height = window.innerHeight;\n\n  var scene = new THREE.Scene();\n\n  var camera = new THREE.PerspectiveCamera(75, width / height, 0.01, 1000);\n  camera.position.z = 15;\n  camera.position.x = 0;\n  camera.position.y = 0;\n  global.camera = camera;\n\n  var renderer = new THREE.WebGLRenderer({canvas: canvas});\n  renderer.setSize(width, height);\n\n  // Lighting\n\n  var directionalLight = new THREE.DirectionalLight( 0xffffff, 0.5 );\n  directionalLight.position.set( 0, 1, 0 );\n  scene.add( directionalLight );\n\n  var directionalLight = new THREE.HemisphereLight( 0xffffff, 0.5 );\n  scene.add( directionalLight );\n\n  global.calc3Dto2D = function (vector) {\n    return vector.clone().project(camera);\n  }\n\n  var controls = new THREE.TrackballControls(camera);\n\n  // Skybox\n\n  var skybox = new THREE.Mesh(\n    new THREE.SphereGeometry(500, 50, 50),\n    new THREE.MeshBasicMaterial({\n      map: Loaders.Texture('images/skybox.jpg'),\n      side: THREE.BackSide\n    })\n  );\n  scene.add(skybox);\n\n  // Hemisphere\n\n  var map = Loaders.Texture(\"images/hemisphere.png\");\n  // var material = new THREE.SpriteMaterial( { map: map, color: 0xffffff, transparent: true, fog: true } );\n  // var sprite = new THREE.Sprite( material );\n  // sprite.scale.set(35,35,35);\n  // scene.add( sprite );\n\n  var earth = new EarthObject();\n  earth.rotation.x = -Math.PI/2;\n  scene.add(earth);\n\n  var fakeData = Loaders.getJSON(\"dataForHenry.json\");\n  console.log(fakeData);\n  for (var i in fakeData.events) {\n    earth.addEvent(fakeData.events[i]);\n  }\n\n  var plane = new THREE.PlaneGeometry(1, 1);\n\n  var mat = new THREE.MeshBasicMaterial({\n      map: map,\n      transparent: true\n    })\n\n  var yo = new THREE.Mesh(plane, mat);\n\n  scene.add(yo);\n\n  window.addEventListener('resize', function() {\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n  });\n\n\n  // Rendering Every Frame\n  var render = function() {\n    requestAnimationFrame(render);\n\n    global.events.dispatchEvent({type: \"update\"});\n\n    controls.update();\n    \n    var opacity = 1/(camera.position.length())*100 + 35;\n    yo.scale.set(opacity,opacity,opacity);\n    yo.rotation.copy(camera.rotation);\n\n    // sprite.position = camera.position.clone().multiplyScalar(-1);\n\n\n    earth.update();\n    renderer.render(scene, camera);\n  };\n  render();\n\n});\n\n"]}